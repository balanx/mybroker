#
# Copyright (C) 2018 tobalanx@qq.com
#

#: include condscreen.kv

<NoteSubRow>:
    size_hint: (1, None)
    height: app.row_height

    Label:
        size_hint_x: None
        width: self.height
        text: '*'

    Button:
        text: str(root.cond)
        on_release: root.wisb.open_cond(root)


<NoteRow>:
    size_hint: (1, None)
    height: app.row_height

    Button:
        size_hint_x: None
        width: self.height
        text: '+'
        on_release: root.wisb.add_subcond(root)

    Button:
        text: str(root.cond)
        on_release: root.wisb.open_cond(root)


<NoteScreen>:

    BoxLayout:
        orientation: 'vertical'
        spacing: app.row_space

        BoxLayout:
            size_hint: (1, None)
            height: app.row_height

            Button:
                text: "<<"
                size_hint_x: None
                width: self.height
                on_release: root.wisb.close_note(); app.save_fd()

            Button:
                text: '~' if root.note[0][1] else '|'
                size_hint_x: None
                width: self.height
                on_release: root.note[0][1] = not root.note[0][1]; self.text = '~' if root.note[0][1] else '|'

            Label:
                text: 'Note'

            Button:
                text: "x"
                size_hint_x: None
                width: self.height
                on_release: root.wisb.del_note(); app.save_fd()

        BoxLayout:
            size_hint: (1, None)
            height: app.row_height

            Label:
                text: 'Code'
                size_hint_x: None
                width: self.height

            TextInput:
                text: root.note[0][0]
                multiline: False
                #focus: True
                #on_text: root.on_text_code(self.text)
                on_text: root.note[0][0] = self.text

            Button:
                text: "+"
                on_release: root.add_cond()

        ScrollView:
            size_hint: (1, 1)

            BoxLayout:
                id: layout
                orientation: 'vertical'
                spacing: app.row_space
                size_hint_y: None
                height: self.minimum_height

        BoxLayout:
            size_hint: (1, None)
            height: app.row_height

            Button:
                text: 'Log'
                size_hint_x: None
                width: self.height
                on_release: root.note[2] = [root.note[2][0]]; root.text[0] = str(root.note[2])

            Label:
                #text: 'Short Medium Long Term, Trends or Vibration'
                text_size: self.size
                #valign: 'bottom'
                text: root.text[0]


#
